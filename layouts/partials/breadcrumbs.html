{{- if not .IsHome }}
{{- $breadcrumbs := slice }}
{{- $breadcrumbs = $breadcrumbs | append (dict "name" "Home" "url" .Site.BaseURL "current" false) }}

{{- if .Section }}
  {{- $sectionTitle := .Section | title }}
  {{- if eq .Section "posts" }}
    {{- $sectionTitle = "Blog" }}
  {{- end }}
  {{- $breadcrumbs = $breadcrumbs | append (dict "name" $sectionTitle "url" (printf "%s%s/" .Site.BaseURL .Section) "current" false) }}
{{- end }}

{{- if and .Parent (ne .Parent.Kind "home") }}
  {{- $breadcrumbs = $breadcrumbs | append (dict "name" .Parent.Title "url" .Parent.Permalink "current" false) }}
{{- end }}

{{- if not .IsSection }}
  {{- $breadcrumbs = $breadcrumbs | append (dict "name" .Title "url" .Permalink "current" true) }}
{{- end }}

<nav aria-label="Breadcrumb" class="breadcrumb-navigation">
  <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
    {{- range $index, $crumb := $breadcrumbs }}
    <li class="breadcrumb-item{{ if $crumb.current }} current{{ end }}" 
        itemprop="itemListElement" 
        itemscope 
        itemtype="https://schema.org/ListItem">
      {{- if $crumb.current }}
        <span aria-current="page" itemprop="name">{{ $crumb.name }}</span>
      {{- else }}
        <a href="{{ $crumb.url }}" itemprop="item">
          <span itemprop="name">{{ $crumb.name }}</span>
        </a>
      {{- end }}
      <meta itemprop="position" content="{{ add $index 1 }}">
      {{- if not $crumb.current }}
        <span class="breadcrumb-separator" aria-hidden="true"> â€º </span>
      {{- end }}
    </li>
    {{- end }}
  </ol>
</nav>

<style>
.breadcrumb-navigation {
  margin: 1rem 0;
  font-size: 0.9rem;
}

.breadcrumb {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  list-style: none;
  padding: 0;
  margin: 0;
  gap: 0.25rem;
}

.breadcrumb-item {
  display: flex;
  align-items: center;
}

.breadcrumb-item:not(.current) a {
  color: #6b7280;
  text-decoration: none;
  transition: color 0.2s ease;
}

.breadcrumb-item:not(.current) a:hover {
  color: #374151;
  text-decoration: underline;
}

.breadcrumb-item.current span {
  color: #1f2937;
  font-weight: 500;
}

.breadcrumb-separator {
  color: #9ca3af;
  margin: 0 0.25rem;
  font-size: 0.8rem;
}

@media (max-width: 640px) {
  .breadcrumb-navigation {
    font-size: 0.8rem;
  }
  
  .breadcrumb {
    gap: 0.125rem;
  }
  
  .breadcrumb-separator {
    margin: 0 0.125rem;
  }
}
</style>
{{- end }}